<!doctype html>
<html>
<head>
    <title>Sous Vide Controller</title>
    <meta name="viewport" content="user-scalable=0, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <link rel="apple-touch-icon"
      sizes="114x114"
      href="/static/icons/apple-touch-icon-114x114.png?v={{ rand_num }}">
    <link rel="apple-touch-startup-image"
          media="(device-width: 320px)
            and (-webkit-device-pixel-ratio: 2)"
          href="/static/icons/apple-touch-startup-image-640x1096.png?v={{ rand_num }}">


    <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" ></script>-->
    <link rel=stylesheet type=text/css href="{{url_for('static', filename='chui.ios-3.0.4.css')}}">
    <link rel=stylesheet type=text/css href="{{url_for('static', filename='app.css')}}?v={{ rand_num }}">
    <script src="/static/chocolatechip-3.0.4.js"></script>
    <script src="/static/chui-3.0.4.js"></script>
    <link rel=stylesheet href="/static/bub.css?v={{ rand_num }}">

</head>
<body>
<div class='bubbles'></div>
<nav>
    <!-- <h1>Clever Title</h1> -->
</nav>

<article id='main'>
    <section>
        <ul class='list'>
            <li class='comp'>
                <aside>
                </aside>
                <div>
                    <h1 id='temp'>130&deg</h1>
                    <h3 id='target'>135&deg</h3>


                </div>
                <aside>
                    <!-- <span>test</span> -->
                </aside>

            </li>

                <!-- <img src="/static/icons/steak.png"> -->
                <!-- <img src="/static/icons/chicken.png"> -->





        </ul>
    </section>
</article>
<select id='selecttemp'>


</select>


<script src="/static/jquery.min.js"></script>
<script src="/static/bub.js?v={{ rand_num }}"></script>
<script>

    $('#selecttemp').hide();

    document.ontouchstart = function(e){ 
    e.preventDefault(); 
}
    for(var i=110; i <181; i++){
        $('#selecttemp').append("<option>" + i.toString() + "</option>");
    }


    $('#main').on('swiperight', function(){
        var numr = parseInt($('#target').html().slice(0,-1)) + 1;
        //console.log(num.toString());
        $('#target').html(numr.toString() + '&deg');
    });


    $('#main').on('swipeleft', function(){
        var numl = parseInt($('#target').html().slice(0,-1)) - 1;
        //console.log(num.toString());
        $('#target').html(numl.toString() + '&deg');
    });

    $('#temp').on('singletap', function(){
        $('#selecttemp').show();
        $('#selecttemp').focus();
        $('#selecttemp').hide();
    });

    $('#selecttemp').change(function(){
        console.log($('select option:selected'));
        $('#target').html($('select option:selected').html() + '&deg');
    });






            // Create sheet and populate it:
            // $.UISheet();
            // $('.sheet').find('section').append("<ul class='list'></li>");
            // $('.sheet .list').append("<li><a class='button' href='javascript:void(null)'>Save</a></li><li><a class='button' href='javascript:void(null)'>Delete</a></li><li><a class='button' href='javascript:void(null)'>Cancel</a></li>");
            // $('.sheet .list').append ('<h2 style="text-align: center; margin: 20px;">The End</h2>');
            
            // $('.sheet .list').on('singletap', '.button', function() {
            //     $.UIHideSheet();
            // });
            
            // // Initialize button to show sheet:
            // $('#temp').on('singletap', function() {
            //     $.UIShowSheet();
            // });

</script>


<!--

    <nav>
        <h1>Sous Vide Control</h1>

    </nav>
    <article id="main" class="current">
        <section>
            <ul class='list'>
                <li class='comp'>
                    <div id='main_display'>
                        <div id='updown'>Up</div>
                        <div id="timetemptarget">
                            <div id='time_target'>
                                <span id='time'>5:00</span><span id='target'>135&#8457</span>
                            </div>
                            <div id='temp'>130</div>
                            
                        </div>
                    </div>
                </li>
            </ul>
            <ul class='list'>
                <li class='nav' data-goto="presets">
                    <h1>Presets</h1>
                </li>
                <li class='nav'>
                    <h1>Other settings</h1>
                </li>
            </ul>
        </section>
    </article>



    <nav class='next'>
        <a href="#" class='button back'></a>
        <h1>Presets</h1>
    </nav>
    <article id="presets" class="next">
        <section>
          <a class='button back'></a> 
            <h2>Meats</h2>
            <ul class='list'>
                <li>
                    <h3>Steak</h3>
                    <h4>130F - 150F</h4>
                    <ul class='list'>
                        <li>
                            <h3>Rare: 130F</h3>
                        </li>
                        <li>
                            <h3>Medium: 135-140F</h3>
                        </li>
                    </ul>
                </li>
                <li>
                    <h3>Chicken</h3>
                </li>
            </ul>
            <h2>Vegetables</h2>

        </section>
    </article>

 
 -->









    <script>
        //$('#temp')[0].text("test");
        

        var state = 0;
        var OK = '';
        $('#test').click(function(){
            var a = $.ajax({
                type: "post",
                url: "https://agent.electricimp.com/38G_5vTOSCQK",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded",
                    "async": true,
                    "Access-Control-Allow-Origin" : "*",
                    "Accept": "text/plain"
                },
                data: {"led": state},
                crossDomain: true,
                dataType: 'jsonp',
                success: function(data){
                    console.log(data);
                    console.log("Success Test");
                },
                error: function(data){
                    console.log("Error:");
                    console.log(data);
                }
            });
            console.log(state);
            state = 1-state;
        });

        

      //  console.log($('#temp'));
       // console.log("Test");
       












    </script>

</body>

</html>